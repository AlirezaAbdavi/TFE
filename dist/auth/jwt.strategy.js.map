{"version":3,"sources":["../../src/auth/jwt.strategy.ts"],"sourcesContent":["import { ExtractJwt, Strategy } from 'passport-jwt';\r\nimport { PassportStrategy } from '@nestjs/passport';\r\nimport { Injectable } from '@nestjs/common';\r\nimport { ConfigService } from '@nestjs/config'; // ایمپورت\r\n\r\n@Injectable()\r\nexport class JwtStrategy extends PassportStrategy(Strategy) {\r\n  // ConfigService را اینجا تزریق می‌کنیم\r\n  constructor(private configService: ConfigService) {\r\n    super({\r\n      jwtFromRequest: ExtractJwt.fromAuthHeaderAsBearerToken(),\r\n      ignoreExpiration: false,\r\n      // خواندن کلید از طریق سرویس کانفیگ\r\n      secretOrKey: configService.get<string>('JWT_SECRET')!,\r\n    });\r\n  }\r\n\r\n  async validate(payload: any) {\r\n    return { userId: payload.sub, email: payload.email };\r\n  }\r\n}\r\n"],"names":["JwtStrategy","PassportStrategy","Strategy","validate","payload","userId","sub","email","configService","jwtFromRequest","ExtractJwt","fromAuthHeaderAsBearerToken","ignoreExpiration","secretOrKey","get"],"mappings":";;;;+BAMaA;;;eAAAA;;;6BANwB;0BACJ;wBACN;wBACG;;;;;;;;;;AAGvB,IAAA,AAAMA,cAAN,MAAMA,oBAAoBC,IAAAA,0BAAgB,EAACC,qBAAQ;IAWxD,MAAMC,SAASC,OAAY,EAAE;QAC3B,OAAO;YAAEC,QAAQD,QAAQE,GAAG;YAAEC,OAAOH,QAAQG,KAAK;QAAC;IACrD;IAZA,uCAAuC;IACvC,YAAY,AAAQC,aAA4B,CAAE;QAChD,KAAK,CAAC;YACJC,gBAAgBC,uBAAU,CAACC,2BAA2B;YACtDC,kBAAkB;YAClB,mCAAmC;YACnCC,aAAaL,cAAcM,GAAG,CAAS;QACzC,SANkBN,gBAAAA;IAOpB;AAKF"}